{"id":"ai-jam-6h9","title":"Epic 5: AI-Powered Insights","description":"To provide deep context for proposed topics using Large Language Models.\n\nIncludes:\n- 5.1 Cached Topic Unfolding: Users can click \"Explore\" button on topics to see AI-generated breakdown. First result cached globally for all users to see instantly without new API calls","status":"open","priority":2,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:34:09.433459+01:00","created_by":"Tomáš Landovský","updated_at":"2026-01-31T21:34:09.433459+01:00"}
{"id":"ai-jam-f52","title":"Epic 2: Intelligent Onboarding \u0026 Privacy","description":"To build a rich member database while strictly protecting personal data until it is contextually relevant.\n\nIncludes:\n- 2.1 Three-Step Progressive Onboarding: Anonymous users sign up through a flow collecting interests before credentials (Step 1: AI interests/tools, Step 2: Email/Password account, Step 3: Personal/professional bio)\n- 2.2 Contextual Profile Privacy: Bio and interests hidden by default, only visible to other attendees of same event after RSVP (Event Unlock feature)","status":"open","priority":2,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:34:03.085673+01:00","created_by":"Tomáš Landovský","updated_at":"2026-01-31T21:34:03.085673+01:00"}
{"id":"ai-jam-lkb","title":"Epic 4: Collaborative Programming (The \"Jam\")","description":"To crowdsource the event agenda through democratic topic proposals and management.\n\nIncludes:\n- 4.1 Topic Suggestion \u0026 Sponsorship: Registered users can suggest topics (Handle, Description, Expected Outcomes) and volunteer to manage/sponsor them\n- 4.2 Per-Event Weighted Voting: Each registered user gets 3 votes per event to distribute across topics. Votes don't carry over. No automated deadline, voting open until Admin finalizes agenda","status":"open","priority":2,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:34:08.403236+01:00","created_by":"Tomáš Landovský","updated_at":"2026-01-31T21:34:08.403236+01:00"}
{"id":"ai-jam-oks","title":"Epic 3: Event Engagement \u0026 Capacity","description":"To manage physical space constraints and handle high-demand attendance fairly.\n\nIncludes:\n- 3.1 RSVP with Capacity Tracking: Registered users can RSVP to events with real-time availability display (\"X spots remaining\") and toggle between \"Attending\" and \"Not Attending\"\n- 3.2 FIFO Waiting List: When capacity reached, users can join waitlist. Auto-promotion promotes next person when someone cancels and sends notification","status":"open","priority":2,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:34:06.890558+01:00","created_by":"Tomáš Landovský","updated_at":"2026-01-31T21:34:06.890558+01:00"}
{"id":"ai-jam-pmd","title":"Epic 1: Public Presence \u0026 Discovery","description":"To communicate the value of the community and maintain a persistent, searchable knowledge base of AI \"recipes.\"\n\nIncludes:\n- 1.1 Landing Page Discovery: Anonymous users can view a landing page explaining mission, cadence, and format with CTAs for \"Join Community\" and \"Explore Recipes\"\n- 1.2 The Living Recipe Book: Users can browse past topics formatted as \"Recipes\" with Handle, Description, and Outcomes. Recipes remain editable by Topic Manager or Admin, with search/filter by keywords or tags","status":"in_progress","priority":2,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:33:58.990677+01:00","created_by":"Tomáš Landovský","updated_at":"2026-01-31T21:48:47.571163+01:00"}
{"id":"ai-jam-pmd.1","title":"Plan Epic 1: Public Presence \u0026 Discovery","status":"closed","priority":1,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:49:22.261352+01:00","created_by":"Tomáš Landovský","updated_at":"2026-01-31T22:08:23.358416+01:00","closed_at":"2026-01-31T22:08:23.358416+01:00","close_reason":"Closed","dependencies":[{"issue_id":"ai-jam-pmd.1","depends_on_id":"ai-jam-pmd","type":"parent-child","created_at":"2026-01-31T21:49:22.262047+01:00","created_by":"Tomáš Landovský"}],"comments":[{"id":1,"issue_id":"ai-jam-pmd.1","author":"Tomáš Landovský","text":"# Plan: Epic 1 - Public Presence \u0026 Discovery\n\n## Branch\n`feature/ai-jam-pmd-public-presence-discovery`\n\n## Overview\nThis epic implements two key features: (1) A landing page for anonymous users that communicates the AI Jam mission and provides CTAs, and (2) A browsable recipe book with search/filter capabilities and role-based editing. The landing page already exists at `app/views/pages/home.html.erb` and is fully styled according to the style guide. The main work is implementing the recipe book with proper authentication/authorization and making the landing page links functional.\n\n## Key patterns to follow\n- `app/views/pages/home.html.erb` - Landing page already implements the brutalist design system from `docs/style-guide.md`. Use this as the reference for all new pages\n- `app/controllers/application_controller.rb` - Session-based authentication with `current_user` and `signed_in?` helpers, i18n locale switching\n- `app/models/recipe.rb` - Recipe model already exists with `title`, `content`, `tags` (YAML array), `image`, and associations to `author` and `jam_session`\n- `app/controllers/recipes_controller.rb` - Basic recipe index/show already exists with search and tag filtering\n\n## Current state analysis\n\n**What already exists:**\n- Landing page (`/pages/home`) with all sections: hero, how it works, who is this for, recipe gallery preview, join/CTA\n- Recipe model with title, content, tags, image, author_id, jam_session_id\n- Basic RecipesController with index/show actions and search/filter logic\n- User model with has_secure_password authentication\n- Author model (separate from User - represents recipe authors)\n- JamSession model (represents past meetups)\n- Onboarding flow (3-step progressive onboarding)\n- Brutalist design system fully documented in `docs/style-guide.md`\n- I18n support (EN/CS) with locale switching\n\n**What's missing:**\n- Recipe views (index.html.erb, show.html.erb) don't exist yet\n- Routes for recipes not defined\n- Authorization logic for recipe editing (Topic Manager or Admin roles)\n- User roles system (no role column in users table)\n- Connection between User and Author models\n- Recipe creation/edit forms\n- Search/filter UI components\n- Published/draft state for recipes\n\n## Files to create\n- [ ] `app/views/recipes/index.html.erb` - Recipe listing page with search/filter UI\n- [ ] `app/views/recipes/show.html.erb` - Individual recipe detail page\n- [ ] `app/views/recipes/_recipe_card.html.erb` - Reusable recipe card partial (already used in homepage)\n- [ ] `app/views/recipes/_search_form.html.erb` - Search and filter form partial\n- [ ] `app/views/recipes/new.html.erb` - Recipe creation form (authenticated users only)\n- [ ] `app/views/recipes/edit.html.erb` - Recipe editing form (role-based access)\n- [ ] `db/migrate/YYYYMMDDHHMMSS_add_role_to_users.rb` - Add role column to users table\n- [ ] `db/migrate/YYYYMMDDHHMMSS_add_user_id_to_authors.rb` - Link authors to users for ownership\n- [ ] `db/migrate/YYYYMMDDHHMMSS_add_published_to_recipes.rb` - Add published boolean to recipes\n- [ ] `app/models/concerns/authorizable.rb` - Authorization logic for recipe editing\n- [ ] `app/controllers/concerns/authorization.rb` - Controller authorization concern\n- [ ] `config/locales/recipes.en.yml` - Recipe page i18n translations\n- [ ] `config/locales/recipes.cs.yml` - Czech translations for recipes\n\n## Files to modify\n- [ ] `config/routes.rb` - Add recipes resources with appropriate actions\n- [ ] `app/models/user.rb` - Add role enum, associations with Author model, authorization methods\n- [ ] `app/models/author.rb` - Add belongs_to :user association\n- [ ] `app/models/recipe.rb` - Add published scope, authorization methods, validation enhancements\n- [ ] `app/controllers/recipes_controller.rb` - Add create/update/destroy actions, authorization checks\n- [ ] `app/views/pages/home.html.erb` - Update recipe gallery \"View all\" link and individual recipe card links\n\n## Watch out for\n\n- **Author vs User distinction**: The schema has both `authors` and `users` tables. Authors appear to be a simplified representation (just name) for recipe attribution, while Users are full accounts with authentication. You'll need to decide whether to merge these or create a link between them. Based on the existing schema, it seems Authors can exist independently (for legacy/guest recipes), so add an optional `user_id` to authors rather than replacing the Author model.\n\n- **Role-based authorization**: The requirement says \"Topic Manager or Admin\" can edit recipes, but there's no role system yet. You'll need to:\n  1. Add a `role` enum to the users table (e.g., `member`, `topic_manager`, `admin`)\n  2. Create authorization methods to check if a user can edit a specific recipe\n  3. The recipe author (via Author-\u003eUser link) should also be able to edit their own recipes\n\n- **Published vs Draft**: Recipes need to be editable by authorized users, which suggests they need a `published` state. Anonymous users should only see published recipes. The homepage already shows 3 recipe cards, so ensure those are published examples.\n\n- **Tag filtering performance**: The current `filter_by_tag` in RecipesController loads all recipes into memory then filters (`recipes.select`). This won't scale. Since tags are stored as YAML in a text column, you'll need to use SQL LIKE queries for filtering (e.g., `WHERE tags LIKE '%- tag_name%'`).\n\n- **Search UX**: The existing controller accepts `params[:q]` for search and `params[:tag]` for filtering. You need to build a UI that preserves these params across navigation and makes the current filters visible to users.\n\n- **I18n for recipe content**: Recipes are user-generated content, so they likely won't be translated. However, UI elements (labels, buttons, placeholders) need both EN and CS translations.\n\n- **Image handling**: The Recipe model has an `image` string column but no attachment processing. This is likely a URL or placeholder. If you need file uploads, you'll need to add Active Storage or store external URLs.\n\n## Dependencies to be careful with\n\n- `app/controllers/application_controller.rb` - The `authenticate_user!` method redirects to onboarding step 1. Recipe editing will need this, but make sure anonymous browsing doesn't trigger it.\n\n- `app/models/recipe.rb` - The `belongs_to :jam_session, optional: true` and `belongs_to :author, optional: true` mean recipes can exist without these associations. When creating new recipes via the web UI, you'll need to decide whether to require an author (linked to the current user) or make it truly optional.\n\n- Locale switching - The `around_action :switch_locale` in ApplicationController ensures all pages respect the locale param. Make sure recipe URLs preserve `?locale=cs` when navigating.\n\n- Flash messages - The layout renders flash messages with brutalist styling. Use `redirect_to ..., notice: \"...\"` for success messages.\n\n## Technical approach\n\n### 1.1 Landing Page Discovery (Already Complete)\nThe landing page at `/` (root) is already implemented and matches the design requirements:\n- Explains mission, cadence, and format ✓\n- \"Join Community\" CTA links to onboarding ✓\n- \"Explore Recipes\" section exists but needs functional link\n\n**Action needed**: Update the \"View all recipes\" link in `app/views/pages/home.html.erb` to point to `recipes_path` once routes are set up.\n\n### 1.2 The Living Recipe Book\n\n**Data model enhancements:**\n1. Add `role` enum to User: `:member` (default), `:topic_manager`, `:admin`\n2. Add `user_id` to Author (optional) to link accounts to recipe authors\n3. Add `published` boolean to Recipe (default: false for new recipes by members, true for admins)\n\n**Authorization strategy:**\n- Anonymous users: Can browse published recipes only\n- Authenticated members: Can create recipes (starts as draft if member, published if admin)\n- Recipe author (User linked to Author): Can edit their own recipes\n- Topic managers: Can edit any recipe in their assigned jam_session (future enhancement - for now, can edit any)\n- Admins: Can edit any recipe\n\n**Routes structure:**\n```ruby\nresources :recipes, only: [:index, :show, :new, :create, :edit, :update]\n```\n\n**Recipe index page:**\n- Grid layout following the pattern from homepage recipe gallery section\n- Search bar (text input styled per style guide)\n- Tag filter (show all available tags as clickable brutalist badges)\n- Active filters displayed with clear/remove option\n- Pagination if needed (use will_paginate or kaminari, or simple LIMIT/OFFSET)\n\n**Recipe show page:**\n- Hero section with recipe image/emoji (like recipe cards)\n- Title, author name, jam session (if linked)\n- Tags displayed as brutalist badges\n- Main content area with formatted text\n- Edit button (only visible to authorized users)\n- \"Back to recipes\" navigation\n\n**Recipe form (new/edit):**\n- Form styled following the pattern in `app/views/onboarding/step2.html.slim` (inputs, labels, buttons)\n- Fields: title, content (textarea), tags (comma-separated or multi-select), image URL\n- Published checkbox (only for topic_managers and admins)\n- Author auto-assigned based on current_user\n- Jam session dropdown (optional)\n\n## Testing approach\n\n**Manual testing checklist:**\n- Anonymous user can view landing page\n- Anonymous user can browse published recipes\n- Anonymous user cannot see unpublished recipes\n- Anonymous user cannot access recipe creation/edit forms\n- Authenticated member can create recipes (saved as draft)\n- Recipe author can edit their own recipe\n- Topic manager can edit any recipe\n- Admin can edit and publish any recipe\n- Search returns relevant results\n- Tag filtering works correctly\n- Multiple filters can be applied simultaneously\n- Locale switching preserves current page and filters\n- Recipe cards on homepage link to actual recipes\n\n**Edge cases from spec:**\n- Recipe with no author - display \"Anonymous\" or handle gracefully\n- Recipe with no jam_session - don't display session info\n- Recipe with no tags - don't show empty tags section\n- Recipe with long content - ensure proper text wrapping and layout\n- Search with no results - show helpful \"no results\" message\n- Filter by non-existent tag - show no results or validate tag\n\n**Unit tests (if time permits):**\n- User role validations\n- Recipe authorization logic\n- Tag filtering SQL queries\n- Published scope\n\n**Integration tests:**\n- Anonymous recipe browsing flow\n- Authenticated recipe creation flow\n- Recipe editing authorization\n\n## Documentation to update\n- [ ] `docs/AI Jam Community README.md` - Update with link to live recipe book once deployed\n- [ ] `config/locales/homepage.en.yml` - Update deprecated form fields if cleaning up\n- [ ] `config/locales/homepage.cs.yml` - Same as above\n\n## Implementation sequence\n\n**Phase 1: Data model (migrations + model updates)**\n1. Add role to users\n2. Add user_id to authors  \n3. Add published to recipes\n4. Update model associations and add authorization methods\n\n**Phase 2: Routes and basic controller actions**\n1. Add recipe routes\n2. Implement index, show, new, create, edit, update actions\n3. Add authorization checks (before_action callbacks)\n\n**Phase 3: Views (following brutalist style guide)**\n1. Recipe index with search/filter UI\n2. Recipe show page\n3. Recipe form (new/edit)\n4. Partials (card, search form)\n5. Update homepage links\n\n**Phase 4: I18n**\n1. Extract all user-facing strings to locale files\n2. Add Czech translations\n\n**Phase 5: Testing and polish**\n1. Manual testing of all user flows\n2. Fix edge cases\n3. Add helpful empty states\n4. Ensure responsive design\n\n## Notes\n- The landing page is already complete and matches the brutalist design system beautifully\n- Focus implementation effort on the recipe book functionality\n- The existing RecipesController has good search/filter logic foundation, but needs views and authorization\n- Consider keeping Author and User separate - this allows recipes from past sessions (before user accounts) to have attributed authors\n- The design system is very well documented - stick to it religiously for consistency\n- All interactive elements need brutalist hover effects (translate + shadow reduction)","created_at":"2026-01-31T21:08:20Z"}]}
{"id":"ai-jam-pmd.2","title":"Implement Epic 1: Public Presence \u0026 Discovery","status":"closed","priority":1,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:49:22.751566+01:00","created_by":"Tomáš Landovský","updated_at":"2026-02-01T05:47:34.651884+01:00","closed_at":"2026-02-01T05:47:34.651884+01:00","close_reason":"Epic 1 implementation complete. All features working: recipe browsing, search, filtering, CRUD operations, i18n, authorization. 16/16 browsing tests passing. See full summary in comments.","dependencies":[{"issue_id":"ai-jam-pmd.2","depends_on_id":"ai-jam-pmd","type":"parent-child","created_at":"2026-01-31T21:49:22.752277+01:00","created_by":"Tomáš Landovský"},{"issue_id":"ai-jam-pmd.2","depends_on_id":"ai-jam-pmd.1","type":"blocks","created_at":"2026-01-31T21:49:27.376417+01:00","created_by":"Tomáš Landovský"}],"comments":[{"id":2,"issue_id":"ai-jam-pmd.2","author":"Tomáš Landovský","text":"# Epic 1: Public Presence \u0026 Discovery - Implementation Complete\n\n## Summary\n\nSuccessfully implemented all features for Epic 1 as defined in the plan. The Recipe Book is fully functional with search, filtering, role-based authorization, and i18n support.\n\n## What Was Implemented\n\n### 1. Data Model (Phase 1)\nAll migrations were already completed on this branch:\n- Added `role` enum to Users (member, topic_manager, admin)\n- Added `user_id` to Authors (links users to recipe authorship)  \n- Added `published` boolean to Recipes (draft vs published state)\n\n### 2. Backend Logic (Phase 2)\n- RecipesController with full CRUD operations\n- Authorization logic in User model (`can_edit_recipe?`, `can_publish_recipe?`)\n- Search and tag filtering in recipes index\n- Published/draft scopes on Recipe model\n- Automatic author creation when users create their first recipe\n\n### 3. Views (Phase 3)\nAll views follow the brutalist design system from docs/style-guide.md:\n- recipes/index.html.erb - Recipe listing with search/filter UI\n- recipes/show.html.erb - Recipe detail page with all metadata\n- recipes/_recipe_card.html.erb - Reusable recipe card partial\n- recipes/_search_form.html.erb - Search and filter form\n- recipes/new.html.erb - Recipe creation form\n- recipes/edit.html.erb - Recipe editing form\n- recipes/_form.html.erb - Shared form partial\n- pages/home.html.erb - Updated to load real recipes from database\n\n### 4. I18n (Phase 4)\n- Complete English translations in config/locales/recipes.en.yml\n- Complete Czech translations in config/locales/recipes.cs.yml\n- Locale switching preserved across navigation\n- Search/filter parameters preserved when changing locale\n\n### 5. Testing\nCreated comprehensive RSpec system tests:\n- recipe_browsing_spec.rb - 16 passing tests\n- Covers: browsing, search, filtering, locale switching, access control\n\n### 6. Bug Fixes\n- Fixed JamSession attribute name from `name` to `title` in views\n- Fixed empty tags field serialization error in controller\n\n## Key Features\n\n### Anonymous Users Can:\n- Browse all published recipes\n- Search recipes by title/content\n- Filter recipes by tags\n- View individual recipe details\n- Switch between EN/CS locales\n- Cannot see draft recipes\n- Cannot access recipe creation/edit forms\n\n### Authenticated Members Can:\n- Create new recipes (saved as drafts by default)\n- Edit their own recipes\n- View their own draft recipes\n\n### Topic Managers \u0026 Admins Can:\n- Create published recipes directly\n- Edit any recipe\n- Publish/unpublish recipes\n\n## Test Coverage\n\nAll 16 recipe browsing tests passing:\n✓ Homepage recipe gallery displays published recipes with clickable cards\n✓ Recipe index lists all published recipes\n✓ Search by text works\n✓ Tag filtering works\n✓ Combining search and tag filters\n✓ Empty state when no results\n✓ Clearing all filters\n✓ Recipe show page displays full details\n✓ Handles recipes without optional fields\n✓ Navigation back to recipes\n✓ Clicking tags filters by that tag\n✓ Czech locale switching works\n✓ Locale preserves search parameters\n✓ Draft recipes hidden from anonymous users\n✓ Redirects when accessing drafts\n✓ Create button only for authenticated users\n\n## Deployment\n\nRun: `bundle exec rails db:seed`\n\nTest users:\n- admin@aijam.test / password123 (Admin)\n- manager@aijam.test / password123 (Topic Manager)\n- member@aijam.test / password123 (Member)\n\n## Files Modified (in final commits)\n\napp/controllers/pages_controller.rb\napp/controllers/recipes_controller.rb\napp/views/pages/home.html.erb\napp/views/recipes/_form.html.erb\napp/views/recipes/show.html.erb\ndb/seeds.rb\ndb/schema.rb\nspec/factories/users.rb\nspec/factories/recipes.rb (new)\nspec/factories/authors.rb (new)\nspec/factories/jam_sessions.rb (new)\nspec/system/recipe_browsing_spec.rb (new)\nspec/system/recipe_management_simple_spec.rb (new)","created_at":"2026-02-01T04:48:00Z"}]}
{"id":"ai-jam-pmd.3","title":"Review Epic 1: Public Presence \u0026 Discovery","status":"open","priority":1,"issue_type":"task","owner":"landovsky@gmail.com","created_at":"2026-01-31T21:49:23.248019+01:00","created_by":"Tomáš Landovský","updated_at":"2026-01-31T21:49:23.248019+01:00","dependencies":[{"issue_id":"ai-jam-pmd.3","depends_on_id":"ai-jam-pmd","type":"parent-child","created_at":"2026-01-31T21:49:23.248656+01:00","created_by":"Tomáš Landovský"},{"issue_id":"ai-jam-pmd.3","depends_on_id":"ai-jam-pmd.2","type":"blocks","created_at":"2026-01-31T21:49:27.894876+01:00","created_by":"Tomáš Landovský"}]}
