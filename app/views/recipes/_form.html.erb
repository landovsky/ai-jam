<div class="bg-white border-4 border-stone-900 rounded-3xl p-8 md:p-12 shadow-[12px_12px_0px_0px_#1c1917]">
  <%= form_with model: recipe, local: true do |f| %>
    <!-- Error Messages -->
    <% if recipe.errors.any? %>
      <div class="mb-8 p-6 bg-red-50 border-2 border-red-900 rounded-xl">
        <h3 class="text-lg font-black text-red-900 mb-3 uppercase tracking-wider">
          <%= t('recipes.form.errors_header', count: recipe.errors.count) %>
        </h3>
        <ul class="list-disc list-inside space-y-1">
          <% recipe.errors.full_messages.each do |message| %>
            <li class="text-red-800 font-medium"><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <!-- Title -->
    <div class="mb-6">
      <%= f.label :title, class: "block text-sm font-black text-stone-900 uppercase tracking-wider mb-2" do %>
        <%= t('recipes.form.title_label') %>
      <% end %>
      <%= f.text_field :title, placeholder: t('recipes.form.title_placeholder'), class: "w-full bg-stone-50 border-2 border-stone-900 rounded-xl px-4 py-4 text-stone-900 font-bold focus:ring-0 focus:shadow-[4px_4px_0px_0px_#1c1917] focus:translate-x-[-2px] focus:translate-y-[-2px] outline-none transition-all" %>
    </div>

    <!-- Content -->
    <div class="mb-6">
      <%= f.label :content, class: "block text-sm font-black text-stone-900 uppercase tracking-wider mb-2" do %>
        <%= t('recipes.form.content_label') %>
      <% end %>
      <%= f.text_area :content, rows: 12, placeholder: t('recipes.form.content_placeholder'), class: "w-full bg-stone-50 border-2 border-stone-900 rounded-xl px-4 py-4 text-stone-900 font-bold focus:ring-0 focus:shadow-[4px_4px_0px_0px_#1c1917] focus:translate-x-[-2px] focus:translate-y-[-2px] outline-none transition-all" %>
      <p class="mt-2 text-xs text-stone-600 font-medium"><%= t('recipes.form.content_hint') %></p>
    </div>

    <!-- Image (Emoji) -->
    <div class="mb-6">
      <%= f.label :image, class: "block text-sm font-black text-stone-900 uppercase tracking-wider mb-2" do %>
        <%= t('recipes.form.image_label') %>
      <% end %>
      <%= f.text_field :image, placeholder: t('recipes.form.image_placeholder'), class: "w-full bg-stone-50 border-2 border-stone-900 rounded-xl px-4 py-4 text-stone-900 font-bold focus:ring-0 focus:shadow-[4px_4px_0px_0px_#1c1917] focus:translate-x-[-2px] focus:translate-y-[-2px] outline-none transition-all" %>
      <p class="mt-2 text-xs text-stone-600 font-medium"><%= t('recipes.form.image_hint') %></p>
    </div>

    <!-- Tags -->
    <div class="mb-6">
      <%= f.label :tags, class: "block text-sm font-black text-stone-900 uppercase tracking-wider mb-2" do %>
        <%= t('recipes.form.tags_label') %>
      <% end %>
      <%= f.text_field :tags, value: recipe.tags&.join(', '), placeholder: t('recipes.form.tags_placeholder'), class: "w-full bg-stone-50 border-2 border-stone-900 rounded-xl px-4 py-4 text-stone-900 font-bold focus:ring-0 focus:shadow-[4px_4px_0px_0px_#1c1917] focus:translate-x-[-2px] focus:translate-y-[-2px] outline-none transition-all" %>
      <p class="mt-2 text-xs text-stone-600 font-medium"><%= t('recipes.form.tags_hint') %></p>
    </div>

    <!-- Jam Session (optional) -->
    <div class="mb-6">
      <%= f.label :jam_session_id, class: "block text-sm font-black text-stone-900 uppercase tracking-wider mb-2" do %>
        <%= t('recipes.form.jam_session_label') %>
      <% end %>
      <%= f.collection_select :jam_session_id, JamSession.order(created_at: :desc), :id, :name, { include_blank: t('recipes.form.jam_session_blank') }, class: "w-full bg-stone-50 border-2 border-stone-900 rounded-xl px-4 py-4 text-stone-900 font-bold focus:ring-0 focus:shadow-[4px_4px_0px_0px_#1c1917] focus:translate-x-[-2px] focus:translate-y-[-2px] outline-none transition-all" %>
    </div>

    <!-- Published (only for topic managers and admins) -->
    <% if current_user.can_publish_recipe? %>
      <div class="mb-8">
        <label class="flex items-center gap-3 cursor-pointer group">
          <%= f.check_box :published, class: "w-6 h-6 border-2 border-stone-900 rounded focus:ring-0 focus:ring-offset-0 text-orange-500" %>
          <span class="text-sm font-black text-stone-900 uppercase tracking-wider group-hover:text-orange-600 transition-colors">
            <%= t('recipes.form.published_label') %>
          </span>
        </label>
        <p class="mt-2 ml-9 text-xs text-stone-600 font-medium"><%= t('recipes.form.published_hint') %></p>
      </div>
    <% end %>

    <!-- Submit Button -->
    <div class="flex gap-4">
      <%= f.submit t('recipes.form.submit'), class: "flex-1 bg-stone-900 hover:bg-stone-800 text-white font-black py-5 rounded-xl border-2 border-stone-900 shadow-[6px_6px_0px_0px_#a8a29e] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[4px_4px_0px_0px_#a8a29e] transition-all text-xl uppercase tracking-widest" %>
      <%= link_to t('recipes.form.cancel'), recipe.persisted? ? recipe_path(recipe) : recipes_path, class: "bg-white hover:bg-stone-50 text-stone-900 font-black py-5 px-8 rounded-xl border-2 border-stone-900 shadow-[6px_6px_0px_0px_#1c1917] hover:translate-x-[2px] hover:translate-y-[2px] hover:shadow-[4px_4px_0px_0px_#1c1917] transition-all text-xl uppercase tracking-widest" %>
    </div>
  <% end %>
</div>
